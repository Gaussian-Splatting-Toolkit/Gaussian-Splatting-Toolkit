# 3D Aruco Evaluation

This submodule has four conponents: generation, calibration, detection, and evaluation. By Aruco functions provided by OpenCV, we can easily compare the mesh generated by models with the ground truth.

## Table of Contents
- [3D Aruco Evaluation](#3d-aruco-evaluation)
  - [Table of Contents](#table-of-contents)
  - [Build](#build)
  - [Usage](#usage)
    - [Generation](#generation)
    - [Calibration](#calibration)
    - [Detection](#detection)
    - [Evaluation](#evaluation)

## Build

The module use xmake as building system. But the `CMakeLists.txt` is also provided. Feel free to choose whatever you like!

Here we demostrate using xmake
```bash
xmake # Build the project
```

## Usage

### Generation

Generate the charuco board
```bash
./3d_aruco_eval -c=1 -d=10 /mnt/f/dataset/robot-studio/evaluation/output
```

Generate the charuco marker images
```bash
./3d_aruco_eval -c=2 -d=10 /mnt/f/dataset/robot-studio/evaluation/output
```

Opencv **does not make any assumption on physical size or pattern size of your board**, so it doesn't matter how large you print it.

### Calibration

```bash
./3d_aruco_eval -c=3 -d=10 -v=/mnt/f/dataset/robot-studio/evaluation/input/calibration.mp4 /mnt/f/recon_workspace/gaussian-splatting-toolkit/gs_toolkit/configs/camera_calibrated.yaml
```

### Detection

To detect the board:

```bash
./3d_aruco_eval -c=4 -v=/mnt/f/dataset/robot-studio/evaluation/input/calibration.mp4 /mnt/f/recon_workspace/gaussian-splatting-toolkit/gs_toolkit/configs/camera_calibrated.yaml
```

To detect the markers:

```bash
./3d_aruco_eval -c=5 -v=/mnt/f/dataset/robot-studio/evaluation/input/marker.mp4 /mnt/f/recon_workspace/gaussian-splatting-toolkit/gs_toolkit/configs/camera_calibrated.yaml
```

### Evaluation
